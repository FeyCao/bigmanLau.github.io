window.__require=function e(t,i,o){function s(c,r){if(!i[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var p="function"==typeof __require&&__require;if(!r&&p)return p(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}}var l=i[c]={exports:{}};t[c][0].call(l.exports,function(e){return s(t[c][1][e]||e)},l,l.exports,e,t,i,o)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)s(o[c]);return s}({Global:[function(e,t,i){"use strict";cc._RF.push(t,"53d17M3QThI24Z++C9N7q/z","Global"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;cc.loader.loadRes("players.json",function(t,i){t?console.log(t):(e.peoples=i.json,cc.sys.localStorage.setItem("peoples",JSON.stringify(e.peoples)))}),cc.loader.loadRes("prize.json",function(t,i){t?console.log(t):(e.prizes=i.json,cc.sys.localStorage.setItem("prizes",JSON.stringify(e.prizes)))}),cc.sys.localStorage.setItem("nameprizes",JSON.stringify([])),cc.sys.localStorage.setItem("prizeIndex",0)},t.prototype.goStart=function(){cc.director.loadScene("choujiang")},t=__decorate([s],t)}(cc.Component));i.default=n,cc._RF.pop()},{}],NamePrize:[function(e,t,i){"use strict";cc._RF.push(t,"a2cacjkAFhKJ7Wi7XbShs+0","NamePrize"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(){function e(){this.name=null,this.prize=null}return e=__decorate([s],e)}());i.default=n,cc._RF.pop()},{}],PanelTransition:[function(e,t,i){"use strict";cc._RF.push(t,"e70affZ60NOJqg1GdhWji/e","PanelTransition"),cc.Class({extends:cc.Component,properties:{duration:0},onLoad:function(){this.outOfWorld=cc.p(3e3,0),this.node.position=this.outOfWorld;var e=cc.callFunc(this.onFadeOutFinish,this),t=cc.callFunc(this.onFadeInFinish,this);this.actionFadeIn=cc.sequence(cc.spawn(cc.fadeTo(this.duration,255),cc.scaleTo(this.duration,1)),t),this.actionFadeOut=cc.sequence(cc.spawn(cc.fadeTo(this.duration,0),cc.scaleTo(this.duration,2)),e),this.node.on("fade-in",this.startFadeIn,this),this.node.on("fade-out",this.startFadeOut,this),this.node.on("touchstart",this.onEventStart,this)},onEventStart:function(){this.startFadeOut()},onDestroy:function(){this.node.off("touchstart",this.onEventStart,this)},startFadeIn:function(){cc.eventManager.pauseTarget(this.node,!0),this.node.position=cc.p(0,0),this.node.setScale(2),this.node.opacity=0,this.node.runAction(this.actionFadeIn)},startFadeOut:function(){cc.eventManager.pauseTarget(this.node,!0),this.node.runAction(this.actionFadeOut)},onFadeInFinish:function(){cc.eventManager.resumeTarget(this.node,!0)},onFadeOutFinish:function(){this.node.position=this.outOfWorld}}),cc._RF.pop()},{}],Prize:[function(e,t,i){"use strict";cc._RF.push(t,"0306cUAYutMzbeYMRLbXQ/D","Prize"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(){function e(){this.name=null}return e=__decorate([s],e)}());i.default=n,cc._RF.pop()},{}],main:[function(e,t,i){"use strict";cc._RF.push(t,"8690bgzEsxIzJk5e+tPUifH","main"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./NamePrize"),s=cc._decorator,n=s.ccclass,c=s.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.successLayout=null,t.people=null,t.playLabel=null,t.prizeName=null,t.peoples=[],t.currentIndex=0,t.prizeIndex=0,t.isFinish=!1,t.peopleObjs=[],t.namePrizeObjs=[],t.prizes=[],t.current=10,t.cureTime=0,t.isPlaying=!1,t.time=5,t}return __extends(t,e),t.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.prizeIndex=JSON.parse(cc.sys.localStorage.getItem("prizeIndex")),this.peopleObjs=JSON.parse(cc.sys.localStorage.getItem("peoples")),this.namePrizeObjs=null!=JSON.parse(cc.sys.localStorage.getItem("nameprizes"))?JSON.parse(cc.sys.localStorage.getItem("nameprizes")):[],this.prizes=null!=JSON.parse(cc.sys.localStorage.getItem("prizes"))?JSON.parse(cc.sys.localStorage.getItem("prizes")):[];for(var e=0;e<this.peopleObjs.length;e++)this.peoples.push(this.getPeople(this.peopleObjs[e]));this.setPrizeView()},t.prototype.setPrizeView=function(){this.prizeIndex>=this.prizes.length?(this.prizeName.string="\u62bd\u5956\u5df2\u7ecf\u7ed3\u675f",this.isFinish=!0):(this.prizeName.string=""+this.prizes[this.prizeIndex].name,this.isFinish=!1)},t.prototype.doButtonClick=function(){this.isFinish||(this.isPlaying?this.stopPlay():(this.successLayout.node.emit("fade-out"),this.startPlay()))},t.prototype.startPlay=function(){this.isPlaying=!0,this.setSelect(),this.playLabel.string="\u505c"},t.prototype.stopPlay=function(){this.isPlaying=!1,this.showSuccess()},t.prototype.getPeople=function(e){var t=cc.instantiate(this.people);return this.layout.node.addChild(t),cc.loader.loadRes(e.img,cc.SpriteFrame,function(e,i){t.getComponent(cc.Sprite).spriteFrame=i}),t.getChildByName("name").getComponent(cc.Label).string=e.name,t},t.prototype.update=function(e){this.isPlaying&&(this.cureTime++,this.cureTime>=this.current&&(1!=this.current&&(this.current=Math.floor(this.current-=.5)),this.cureTime=0,this.setSelect()))},t.prototype.setSelect=function(){for(var e=0;e<this.peoples.length;e++){var t=this.peoples[e];e==this.currentIndex?t.getChildByName("splash").active=!0:t.getChildByName("splash").active=!1}this.currentIndex++,this.currentIndex>=this.peoples.length&&(this.currentIndex=0)},t.prototype.showSuccess=function(){for(var e=0,t=0;t<this.peoples.length;t++){if(this.peoples[t].getChildByName("splash").active){e=t;break}}e=this.changePeople(e);var i=this.peopleObjs[e].name;this.updatePrizeNameList(i),this.setPrizeView(),this.successView(e,i),this.deletePeople(e),this.resetValue()},t.prototype.changePeople=function(e){if(3!=this.prizeIndex){for(t=0;t<this.peopleObjs.length;t++){if(this.peopleObjs[t].isSpecial){if(e==t)return++e;break}}return e}for(var t=0;t<this.peopleObjs.length;t++){if(this.peopleObjs[t].isSpecial)return t}},t.prototype.successView=function(e,t){var i=this.peopleObjs[e].img;this.successLayout.node.getChildByName("label").getComponent(cc.Label).string="\u606d\u559c"+t+"\u4e2d\u5956";var o=this.successLayout.node.getChildByName("img").getComponent(cc.Sprite);cc.loader.loadRes(i,cc.SpriteFrame,function(e,t){o.spriteFrame=t}),this.successLayout.node.emit("fade-in")},t.prototype.deletePeople=function(e){this.peopleObjs.splice(e,1),cc.sys.localStorage.setItem("peoples",JSON.stringify(this.peopleObjs)),this.layout.node.removeChild(this.peoples[e]),this.peoples.splice(e,1)},t.prototype.updatePrizeNameList=function(e){var t=new o.default;t.name=e,t.prize=this.prizes[this.prizeIndex].name,this.namePrizeObjs.push(t),cc.sys.localStorage.setItem("nameprizes",JSON.stringify(this.namePrizeObjs)),cc.sys.localStorage.setItem("prizeIndex",++this.prizeIndex)},t.prototype.resetValue=function(){this.current=10,this.cureTime=0,this.currentIndex=0,this.playLabel.string="\u5f00\u59cb\u62bd\u5956"},t.prototype.goList=function(){cc.director.loadScene("namelist")},__decorate([c(cc.Layout)],t.prototype,"layout",void 0),__decorate([c(cc.Layout)],t.prototype,"successLayout",void 0),__decorate([c(cc.Prefab)],t.prototype,"people",void 0),__decorate([c(cc.Label)],t.prototype,"playLabel",void 0),__decorate([c(cc.Label)],t.prototype,"prizeName",void 0),t=__decorate([n],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./NamePrize":"NamePrize"}],namelist:[function(e,t,i){"use strict";cc._RF.push(t,"6f3b6DWqg1DzpkCdIrWsFzh","namelist"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=o.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPrefab=null,t.nameList=[],t}return __extends(t,e),t.prototype.onLoad=function(){if(this.nameList=JSON.parse(cc.sys.localStorage.getItem("nameprizes")),this.nameList)for(var e=0;e<this.nameList.length;e++){var t=this.nameList[e],i=cc.instantiate(this.itemPrefab);this.content.addChild(i);var o=i.getChildByName("layout");o.getChildByName("index").getComponent(cc.Label).string=e+1+".",o.getChildByName("name").getComponent(cc.Label).string=t.name,o.getChildByName("prize").getComponent(cc.Label).string=t.prize}},t.prototype.start=function(){},t.prototype.goback=function(){cc.director.loadScene("choujiang")},__decorate([n(cc.Node)],t.prototype,"content",void 0),__decorate([n(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=__decorate([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],people:[function(e,t,i){"use strict";cc._RF.push(t,"08eacRX2z1MY6y6gg1hhf68","people"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(){function e(){this.img=null,this.name=null,this.isSpecial=!1}return e=__decorate([s],e)}());i.default=n,cc._RF.pop()},{}],poke:[function(e,t,i){"use strict";cc._RF.push(t,"95d47Go3ydDA4NN5ABXeuI4","poke"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.getComponent(cc.Animation).play("rotation")},t.prototype.start=function(){},t=__decorate([s],t)}(cc.Component));i.default=n,cc._RF.pop()},{}]},{},["Global","NamePrize","PanelTransition","Prize","main","namelist","people","poke"]);